<!DOCTYPE html>
<!--
- Copyright (C) 2012 David Geary. This code is from the book
- Core HTML5 Canvas, published by Prentice-Hall in 2012.
-
- License:
-
- Permission is hereby granted, free of charge, to any person 
- obtaining a copy of this software and associated documentation files
- (the "Software"), to deal in the Software without restriction,
- including without limitation the rights to use, copy, modify, merge,
- publish, distribute, sublicense, and/or sell copies of the Software,
- and to permit persons to whom the Software is furnished to do so,
- subject to the following conditions:
-
- The above copyright notice and this permission notice shall be
- included in all copies or substantial portions of the Software.
-
- The Software may not be used to create training material of any sort,
- including courses, books, instructional videos, presentations, etc.
- without the express written consent of David Geary.
-
- THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
- EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
- OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
- NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
- HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
- WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
- FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
- OTHER DEALINGS IN THE SOFTWARE.
-->

<html>
   <head>
     <title>Paint</title>
      <meta name='viewport' content='width=device-width, initial-scale=1.0'/>
      <meta name='apple-mobile-web-app-capable' content='yes'/>
      <meta name='apple-mobile-web-app-status-bar-style' content='black-translucent'/>
      	<link rel="stylesheet" href="./css/jquery.mobile-1.4.3.css"/>
	<link rel="stylesheet" href="./css/index.css"/>
    <script type="text/javascript" src="./js/jquery-2.1.1.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="./js/jquery.mobile-1.4.3.js"></script>
    <script type="text/javascript" src="./js/words.js"></script>
    <script type="text/javascript" src="phonegap.js"></script>

      <link rel='apple-touch-startup-image' media='(max-device-width: 480px) and not (-webkit-min-device-pixel-ratio: 2)' href='img/startup-iphone.png' />

      <!-- 640x920 for retina display -->
      <link rel='apple-touch-startup-image' media='(max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)' href='startup-iphone4.png' />

      <!-- iPad Portrait 768x1004 -->
      <link rel='apple-touch-startup-image' media='(min-device-width: 768px) and (orientation: portrait)' href='img/startup-iPad-portrait.png' />

      <!-- iPad Landscape 1024x748 -->
      <link rel='apple-touch-startup-image' media='(min-device-width: 768px) and (orientation: landscape)' href='img/startup-iPad-landscape.png' />

      <link rel='apple-touch-icon-precomposed' sizes='72x72' href='img/icon-ipad.png' />
      <script>

			function initCanvases() {
			alert("Called here too");
				var contentHeight = $(window).height() * .95;
				var height = Math.round(contentHeight*.75);
				var iconCanvas = '<canvas id="iconCanvas" width="75" height=" + height + "></canvas>';
				var drawingCanvas = '<canvas id="iconCanvas" width="' + $(window).width() - 75 + '" height=" + height + "></canvas>';
				
				
				//var canvas = '<canvas id="canvas" width="' + $(window).width() + '" height="' + (contentHeight * .75) + '"></canvas>';
				$("#iconCanvas").html(iconCanvas + "\n" + drawingCanvas);
				//$("#drawingCanvas").html(drawingCanvas);

				}
				
				function newWord() {

	numberOfWords = Object.keys(words.word).length;
	var useWord = Math.floor(Math.random() * numberOfWords)
	var wordBlockContent = "";
	$.each(words.word, function(i, v) {
		if(useWord === i) {
			var letters = v.letters.split(",")
			for(j = 0; j < letters.length; j++) {
				wordBlockContent += '<img src="img/' + letters[j] + '_above.png" height="72" width="72" onclick="document.getElementById(\'' + letters[j] + '_Sound\').play()">';
			}
			
		}
		$("#wordBlock").html(wordBlockContent);
	});
	
}

		</script>

      <style> 
         body {
            background: #dddddd;
         }

         option {
            padding-right: 5px;
         }
         
         .floatingControls {
            position: absolute;
            left: 105px;
            top: 70px;
            width: 300px;
            padding: 20px;
            border: thin solid rgba(0, 0, 0, 0.3);
            background: rgba(0, 0, 200, 0.1);
            color: blue;
            font: 14px Arial;
              -webkit-box-shadow: rgba(0, 0, 0, 0.2) 6px 6px 8px;
              -moz-box-shadow: rgba(0, 0, 0, 0.2) 6px 6px 8px;
              box-shadow: rgba(0, 0, 0, 0.2) 6px 6px 8px;
            display: none;
         }

         .floatingControls p {
            margin-top: 0px;
            margin-bottom: 20px;
         }
         
         #iconCanvas {
            background: #eeeeef;
            border: thin solid #aaaaaa;
            cursor: pointer;
              -webkit-box-shadow: rgba(0, 0, 0, 0.5) 2px 2px 4px;
              -moz-box-shadow: rgba(0, 0, 0, 0.5) 2px 2px 4px;
              box-shadow: rgba(0, 0, 0, 0.5) 2px 2px 4px;
            -webkit-border-radius: 8px;
            -moz-border-radius: 8px;
            border-radius: 8px;
         }

         #drawingCanvas {
               background: #ffffff;
               border: thin solid #aaaaaa;
               cursor: crosshair;
               margin-left: 10px;
              -webkit-box-shadow: rgba(0, 0, 0, 0.5) 2px 2px 4px;
              -moz-box-shadow: rgba(0, 0, 0, 0.5) 2px 2px 4px;
              box-shadow: rgba(0, 0, 0, 0.5) 2px 2px 4px;
            -webkit-border-radius: 12px;
            -moz-border-radius: 12px;
            border-radius: 12px;
         }

         #controls {
               padding-top: 5px;
               padding-bottom: 10px;
               padding-left: 100px;
         }

         select { margin-right: 15px; }

         @media all and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait) {
            #controls {
               padding-top: 10px;
               padding-bottom: 10px;
            }

            #drawingCanvas {
               background: #ffffff;
               border: thin solid #aaaaaa;
               cursor: crosshair;
               margin-left: 10px;
                 -webkit-box-shadow: rgba(0, 0, 0, 0.2) 2px 2px 4px;
                 -moz-box-shadow: rgba(0, 0, 0, 0.2) 2px 2px 4px;
                 box-shadow: rgba(0, 0, 0, 0.2) 2px 2px 4px;
               -webkit-border-radius: 8px;
               -moz-border-radius: 8px;
               border-radius: 8px;
            }
         }
         
         @media all and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) {
            #controls {
               padding-top: 20px;
               padding-bottom: 10px;
               padding-left: 85px;
            }

            #drawingCanvas {
               background: #ffffff;
               cursor: crosshair;
               margin-left: 5px;
                 -webkit-box-shadow: rgba(0, 0, 0, 0.5) 2px 2px 4px;
                 -moz-box-shadow: rgba(0, 0, 0, 0.5) 2px 2px 4px;
                 box-shadow: rgba(0, 0, 0, 0.5) 2px 2px 4px;
               -webkit-border-radius: 10px;
               -moz-border-radius: 10px;
               border-radius: 10px;
            }

            #snapshotImageElement {
               position: absolute;
               left: 85px;
               top: 30px;
               margin: 20px;
               display: none;
            }
         }

         #snapshotButton {
            margin-left: 150px;
         }

         #snapshotInstructions {
            position: absolute;
            left: 300px;
            top: 0px;
            margin-top: 17px;
            display: none;
         }

         #keyboard {
            position: absolute;
            left: 25px;
            top: 0px;
            width: 1000px;
            height: 0px;

            background: rgba(129, 129, 138, 0.4);

              -webkit-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 4px;
              -moz-box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 4px;
              box-shadow: rgba(0, 0, 0, 0.2) 3px 3px 4px;
         }

      </style>
   </head>

   <body>
   <audio id="A_Sound" src="sound/A.mp3"></audio>
 <audio id="B_Sound" src="sound/B.mp3"></audio>
 <audio id="C_Sound" src="sound/C.mp3"></audio>
 <audio id="D_Sound" src="sound/D.mp3"></audio>
 <audio id="E_Sound" src="sound/E.mp3"></audio>
 <audio id="F_Sound" src="sound/F.mp3"></audio>
 <audio id="G_Sound" src="sound/G.mp3"></audio>
 <audio id="H_Sound" src="sound/H.mp3"></audio>
 <audio id="I_Sound" src="sound/I.mp3"></audio>
 <audio id="J_Sound" src="sound/J.mp3"></audio>
 <audio id="K_Sound" src="sound/K.mp3"></audio>
 <audio id="L_Sound" src="sound/L.mp3"></audio>
 <audio id="M_Sound" src="sound/M.mp3"></audio>
 <audio id="N_Sound" src="sound/N.mp3"></audio>
 <audio id="O_Sound" src="sound/O.mp3"></audio>
 <audio id="P_Sound" src="sound/P.mp3"></audio>
 <audio id="Q_Sound" src="sound/Q.mp3"></audio> 
 <audio id="R_Sound" src="sound/R.mp3"></audio>
 <audio id="S_Sound" src="sound/S.mp3"></audio>
 <audio id="T_Sound" src="sound/T.mp3"></audio>
 <audio id="U_Sound" src="sound/U.mp3"></audio>
 <audio id="V_Sound" src="sound/V.mp3"></audio>
 <audio id="W_Sound" src="sound/W.mp3"></audio>
 <audio id="X_Sound" src="sound/X.mp3"></audio>
 <audio id="Y_Sound" src="sound/Y.mp3"></audio>
 <audio id="Z_Sound" src="sound/Z.mp3"></audio>

<div data-role="page" id="page1">
<div data-role="header" style="overflow:hidden;">
<h1>R<span style="text-transform: lowercase;">ead!</span>&nbsp; N<span style="text-transform: lowercase;">oah</span> R<span style="text-transform: lowercase;">ead!</span></h1>
    <a href="#" data-icon="gear" id="eraseAllButton" class="ui-btn-right">New</a>
    <div data-role="navbar">
        <ul>
            <li>
            <select name="strokeStyleSelect" id="strokeStyleSelect" data-native-menu="false" >
            			<option>COLOR...</option>
                        <option id="RED" value='red' >RED</option>
                        <option id="GREEN" value='green' >GREEN</option>
                        <option id="BLUE" value='blue'>BLUE</option>
                        <option id="ORANGE" value='orange' >ORANGE</option>
                        <option id="GOLD" value='goldenrod' >GOLD</option>
                        <option id="WHITE" value='white' >WHITE</option>
                        <option id="PURPLE" value='purple' >PURPLE</option>
                     </select>
            
            </li>
            <li><select id='lineWidthSelect' id="lineWidthSelect" data-native-menu="false">
                      <option>PENCIL...</option>
                      <option id="1" value='1.0'>1.0</option>
                      <option id="2" value='2.0'>2.0</option>
                      <option id="3" value='3.0'>3.0</option> 
                      <option id="4" value='4.0'>4.0</option>
                      <option id="5" value='5.0'>5.0</option>
                      <option id="6" value='6.0'>6.0</option>
                      <option id="7" value='7.0'>7.0</option>
                      <option id="8" value='8.0'>8.0</option>
                      <option id="9" value='9.0'>9.0</option>
                   </select></li>
        </ul>
    </div><!-- /navbar -->
</div><!-- /header -->

<div data-role="content" id="content" >
    <img id='snapshotImageElement'/>
    
    <canvas id='iconCanvas' width='75' height='670'>
      Canvas not supported
    </canvas>

    <canvas id='drawingCanvas' width='640' height='670'>
      Canvas not supported
    </canvas>
	<div id="wordBlock" style="text-align:center;margin:0px;padding:10%;"></div>
    <div id='keyboard'></div>
    
    <div id='curveInstructions' class='floatingControls'>
      <p>
      The yellow circle is a control point for the curve. Drag that
      circle around to change the shape of the curve.
      </p>

      <input id='curveInstructionsOkayButton' type='button' value='Okay'/>
      <input id='curveInstructionsNoMoreButton' type='button' value='Do not show this again'/>
    </div>
    </div>
	</div><!-- //page -->

    <script src='js/keyboard.js'></script>
    <script src='js/example.js'></script>
     <script>
$(document).on("pagecreate", function(){    
    var opts = $("#lineWidthSelect option");
    $( "#lineWidthSelect-listbox-popup" ).on( "popupafteropen", function( event, ui ) {
        $("#lineWidthSelect-menu li").each(function(index){
            
            
            if ($(this).find("img").length == 0){
            //alert("ID = " + $(this).text());
               // var imageURL = opts.eq(index).data("./img/A_above.png");
                var imageURL = "img/" + $(this).text() +  ".png";
                var imgElem = '<img src=' + imageURL + ' width="24px" height="24px" />';
                $(this).find("a").prepend(imgElem + "  ");
            }
            
            
        });
    });
});

$(document).on("pagecreate", function(){    
    var opts = $("#strokeStyleSelect option");
    $( "#strokeStyleSelect-listbox-popup" ).on( "popupafteropen", function( event, ui ) {
        $("#strokeStyleSelect-menu li").each(function(index){
            
            
            if ($(this).find("img").length == 0){
            //alert("ID = " + $(this).text());
               // var imageURL = opts.eq(index).data("./img/A_above.png");
                var imageURL = "img/" + $(this).text() +  ".png";
                var imgElem = '<img src=' + imageURL + ' width="24px" height="24px" />';
                $(this).find("a").prepend(imgElem + "  ");
            }
            
            
        });
    });
});
 </script>
  </body>
</html>
